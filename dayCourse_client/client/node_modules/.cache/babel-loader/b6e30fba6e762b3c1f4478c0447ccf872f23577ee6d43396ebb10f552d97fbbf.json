{"ast":null,"code":"var _jsxFileName = \"/Users/jeongyuje0ngyujeong/git_hub/krafton_jungle/dayCourse/dayCourse_client/client/src/pages/Calendar/Schedule.js\",\n  _s = $RefreshSig$();\nimport { Form, useLoaderData, redirect, Link, useOutletContext } from \"react-router-dom\";\nimport { getSchedule, deleteSchedule, getSchedules } from \"../../schedules\";\nimport styled from \"styled-components\";\nimport { useState, useEffect } from 'react';\n// import { Button } from '../../Button';\nimport { Fragment as _Fragment, jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport async function loader({\n  params\n}) {\n  const {\n    dateKey\n  } = params;\n  const schedule = await getSchedule(dateKey);\n  return {\n    schedule\n  };\n}\nexport async function action(params) {\n  const schedule = getSchedule(params.year, params.month, params.date); //eslint-disable-line no-unused-vars\n  // return redirect(`/schedules/${schedule.id}/edit`);\n  return redirect(`/home`);\n}\n// export async function action(params) {\n//   const schedule = getSchedule(params.year,params.month,params.date);\n\n//   return redirect(`/home`);\n// }\n\nconst EventContainer = styled.div`\n  border: 1px, solid;\n  border-radius: 1rem;\n  padding: 1rem;\n  ${'' /* margin-bottom: 1rem; */}\n  margin: 1rem 0;\n  ${'' /* background: red; */}\n\n`;\n_c = EventContainer;\nconst ButtonContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  gap: 1rem;\n  width: 100%;\n`;\n_c2 = ButtonContainer;\nexport default function Schedule(props) {\n  _s();\n  const loaderData = useLoaderData();\n  // const [scheduleData, setScheduleData] = useState(props.schedule || loaderData.schedule) ;\n\n  const [schedules, setSchedules] = useOutletContext() || [null, () => {}];\n  const scheduleData = props.schedule || loaderData.schedule;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: scheduleData && scheduleData.length > 0 ? scheduleData.map((event, index) => /*#__PURE__*/_jsxDEV(EventContainer, {\n      id: \"schedule\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [event.dateKey ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: event.planName\n          }, void 0, false) : /*#__PURE__*/_jsxDEV(\"i\", {\n            children: \"No Date?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 19\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }, this), event.groupName && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: event.groupName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 15\n        }, this), event.notes && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: event.notes\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(ButtonContainer, {\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: `/schedules/${event.planId}`,\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form, {\n            method: \"post\",\n            action: `${event.planId}/destroy`,\n            onSubmit: async e => {\n              // e.preventDefault();\n\n              const newSchedules = await deleteSchedule(event.planId);\n              const newSchedule = await getSchedule(event.dateKey);\n              if (!props) {\n                setSchedules(newSchedules);\n              } else if (props.setModalContent) {\n                props.setModalContent(/*#__PURE__*/_jsxDEV(Schedule, {\n                  schedule: newSchedule,\n                  setModalContent: props.setModalContent\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 93,\n                  columnNumber: 43\n                }, this));\n              }\n              // let schedules = await localforage.getItem(\"schedules\");\n              // let index = schedules.findIndex(schedule => String(schedule.planId) === id);\n\n              // if (index > -1) {\n              //     schedules.splice(index, 1);\n              //     await set(schedules);\n              // }\n              // if (props){\n              //   props.setSchedules(schedules);\n              // }\n              // console.log(\"Parameters:\", params);\n\n              // await deleteSchedule(params.eventId);\n\n              // if (params.dateKey){\n              //     return redirect(`/home/schedules/${params.dateKey}`);\n              // }\n              // else{\n              //     return redirect(`/calendar`);\n              // }\n              // props.setModalContent(false);\n              // props.setModalContent(false);\n              // props.setModalIsOpen(true);\n\n              // const schedule = await getSchedule(event.dateKey);\n\n              // if (params.dateKey){\n              //     return redirect(`/home`);\n              // }\n              // else{\n              //     return redirect(`/calendar`);\n              // }\n              // if (\n              //   !confirm(\n              //     \"Please confirm you want to delete this record.\"\n              //   )\n              // ) {\n              // e.preventDefault();\n              // }\n            },\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this)\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\uC77C\\uC815 \\uC5C6\\uC74C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 12\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n_s(Schedule, \"t8m4/dRy2r1h3C2s3T91J8d/h3M=\", false, function () {\n  return [useLoaderData, useOutletContext];\n});\n_c3 = Schedule;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"EventContainer\");\n$RefreshReg$(_c2, \"ButtonContainer\");\n$RefreshReg$(_c3, \"Schedule\");","map":{"version":3,"names":["Form","useLoaderData","redirect","Link","useOutletContext","getSchedule","deleteSchedule","getSchedules","styled","useState","useEffect","Fragment","_Fragment","jsxDEV","_jsxDEV","loader","params","dateKey","schedule","action","year","month","date","EventContainer","div","_c","ButtonContainer","_c2","Schedule","props","_s","loaderData","schedules","setSchedules","scheduleData","children","length","map","event","index","id","planName","fileName","_jsxFileName","lineNumber","columnNumber","groupName","notes","to","planId","type","method","onSubmit","e","newSchedules","newSchedule","setModalContent","_c3","$RefreshReg$"],"sources":["/Users/jeongyuje0ngyujeong/git_hub/krafton_jungle/dayCourse/dayCourse_client/client/src/pages/Calendar/Schedule.js"],"sourcesContent":["import { Form, useLoaderData, redirect, Link, useOutletContext } from \"react-router-dom\";\nimport { getSchedule, deleteSchedule, getSchedules} from \"../../schedules\";\nimport styled from \"styled-components\";\nimport {useState,useEffect } from 'react';\n// import { Button } from '../../Button';\n\nexport async function loader({ params }) {\n  const { dateKey } = params;\n\n  const schedule = await getSchedule(dateKey);\n  return { schedule };\n}\n\nexport async function action(params) {\n  const schedule = getSchedule(params.year,params.month,params.date); //eslint-disable-line no-unused-vars\n  // return redirect(`/schedules/${schedule.id}/edit`);\n  return redirect(`/home`);\n}\n// export async function action(params) {\n//   const schedule = getSchedule(params.year,params.month,params.date);\n\n//   return redirect(`/home`);\n// }\n\nconst EventContainer = styled.div `\n  border: 1px, solid;\n  border-radius: 1rem;\n  padding: 1rem;\n  ${'' /* margin-bottom: 1rem; */}\n  margin: 1rem 0;\n  ${'' /* background: red; */}\n\n`\n\nconst ButtonContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  gap: 1rem;\n  width: 100%;\n`\n\n\nexport default function Schedule(props) {\n  \n  const loaderData = useLoaderData();\n  // const [scheduleData, setScheduleData] = useState(props.schedule || loaderData.schedule) ;\n  \n  const [schedules, setSchedules] = useOutletContext() || [null, () => {}];\n  const scheduleData = props.schedule || loaderData.schedule;\n\n  return (\n    <div>\n      {scheduleData && scheduleData.length > 0 ? scheduleData.map((event, index) => (\n        <EventContainer key={index} id=\"schedule\">\n          <div>\n            <h3>\n              {event.dateKey ? (\n                  <>\n                    {event.planName}\n                  </>\n                ) : (\n                  <i>No Date?</i>\n                )}{\" \"}\n            </h3>\n\n            {event.groupName && (\n              <p>\n                {event.groupName}\n              </p>\n            )}\n\n            {event.notes && <p>{event.notes}</p>}\n            \n            <ButtonContainer>\n              <Link to={`/schedules/${event.planId}`}>\n                <button type=\"submit\">Edit</button>\n              </Link>\n              <Form\n                method=\"post\"\n                action={`${event.planId}/destroy`}\n                onSubmit={async(e) => {\n                  // e.preventDefault();\n\n                  const newSchedules = await deleteSchedule(event.planId);\n                  const newSchedule = await getSchedule(event.dateKey);\n                  \n                  if (!props){\n                    setSchedules(newSchedules);\n                  }\n                  else if (props.setModalContent)\n                  {\n                    props.setModalContent(<Schedule schedule = {newSchedule} setModalContent = {props.setModalContent}/>);\n                  }\n                  // let schedules = await localforage.getItem(\"schedules\");\n                  // let index = schedules.findIndex(schedule => String(schedule.planId) === id);\n\n                  // if (index > -1) {\n                  //     schedules.splice(index, 1);\n                  //     await set(schedules);\n                  // }\n                  // if (props){\n                  //   props.setSchedules(schedules);\n                  // }\n                  // console.log(\"Parameters:\", params);\n\n                  // await deleteSchedule(params.eventId);\n\n                  // if (params.dateKey){\n                  //     return redirect(`/home/schedules/${params.dateKey}`);\n                  // }\n                  // else{\n                  //     return redirect(`/calendar`);\n                  // }\n                  // props.setModalContent(false);\n                  // props.setModalContent(false);\n                  // props.setModalIsOpen(true);\n\n                  // const schedule = await getSchedule(event.dateKey);\n\n                  // if (params.dateKey){\n                  //     return redirect(`/home`);\n                  // }\n                  // else{\n                  //     return redirect(`/calendar`);\n                  // }\n                  // if (\n                  //   !confirm(\n                  //     \"Please confirm you want to delete this record.\"\n                  //   )\n                  // ) {\n                  // e.preventDefault();\n                  // }\n                }}\n              >\n                <button type=\"submit\">Delete</button>\n              </Form>\n            </ButtonContainer>\n          </div>\n        </EventContainer>\n      )) : <div>일정 없음</div>}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}