"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var numberRank_1 = require("../utils/numberRank");
var StringMatchRank_1 = require("./StringMatchRank");
describe('StringMatchRank', function () {
    describe('orderedMatchRatioRank', function () {
        it('Returns 0 when the match is exact', function () {
            expect(StringMatchRank_1.StringMatchRank.orderedMatchRatioRank('abc')('abc')).toBe(0);
        });
        it('Returns a better rank if the match is exact than if the wordAcronym match is exact', function () {
            var search = 'abc';
            var acronymMatch = 'ad bd cd';
            var exactRank = StringMatchRank_1.StringMatchRank.orderedMatchRatioRank(search)(search);
            var acronymRank = StringMatchRank_1.StringMatchRank.orderedMatchRatioRank(search)(acronymMatch);
            expect((0, numberRank_1.numberRank)(exactRank)).toBeLessThan((0, numberRank_1.numberRank)(acronymRank));
        });
        it('Returns a better rank for a value of which the wordAcronym matches best and better than a value of which the full match matches best', function () {
            var search = 'abc';
            var acronymMatch = 'ad bd cd dd';
            var fullMatch = 'abcde';
            var acronymRank = StringMatchRank_1.StringMatchRank.orderedMatchRatioRank(search)(acronymMatch);
            var fullMatchRank = StringMatchRank_1.StringMatchRank.orderedMatchRatioRank(search)(fullMatch);
            expect((0, numberRank_1.numberRank)(acronymRank)).toBeLessThan((0, numberRank_1.numberRank)(fullMatchRank));
        });
        it('Returns a better rank for a value of which the full match matches best and better than a value of which the wordAcronym matches best', function () {
            var search = 'abc';
            var acronymMatch = 'ad bd cd dd ed';
            var fullMatch = 'abcd';
            var acronymRank = StringMatchRank_1.StringMatchRank.orderedMatchRatioRank(search)(acronymMatch);
            var fullMatchRank = StringMatchRank_1.StringMatchRank.orderedMatchRatioRank(search)(fullMatch);
            expect((0, numberRank_1.numberRank)(fullMatchRank)).toBeLessThan((0, numberRank_1.numberRank)(acronymRank));
        });
        test('General ranking', function () {
            var us = 'us';
            var usa = 'usa';
            var usoa = 'usoa';
            var unitedStates = 'united states';
            var theUnitedStates = 'the united states';
            var unitedStatesAmerica = 'united states america';
            var unitedStatesOfAmerica = 'united states of america';
            var theUnitedStatesOfAmerica = 'the united states of america';
            var unitedStatesWithDash = 'united-states';
            var unitedStatesAmericaWithDash = 'united-states-america';
            var unitedStatesOfAmericaWithDash = 'united-states-of-america';
            var theUnitedStatesOfAmericaWithDash = 'the-united-states-of-america';
            var values = [
                theUnitedStates,
                theUnitedStatesOfAmerica,
                theUnitedStatesOfAmericaWithDash,
                unitedStates,
                unitedStatesAmerica,
                unitedStatesAmericaWithDash,
                unitedStatesOfAmerica,
                unitedStatesOfAmericaWithDash,
                unitedStatesWithDash,
                us,
                usa,
                usoa,
            ];
            var search = 'us';
            var rankFunction = StringMatchRank_1.StringMatchRank.orderedMatchRatioRank(search);
            var sorted = values.sort(function (a, b) {
                var rankA = rankFunction(a);
                var rankB = rankFunction(b);
                return (0, numberRank_1.numberRank)(rankA) - (0, numberRank_1.numberRank)(rankB);
            });
            var expectedResult = [
                us,
                unitedStatesWithDash,
                unitedStates,
                usa,
                unitedStatesAmericaWithDash,
                theUnitedStates,
                unitedStatesAmerica,
                usoa,
                unitedStatesOfAmericaWithDash,
                unitedStatesOfAmerica,
                theUnitedStatesOfAmericaWithDash,
                theUnitedStatesOfAmerica,
            ];
            expect(sorted).toEqual(expectedResult);
        });
    });
    describe('fullStringOrderedMatchRatioRank', function () {
        it('Returns 1 if the value does not contain all characters in order', function () {
            expect(StringMatchRank_1.StringMatchRank.fullStringOrderedMatchRatioRank('abc')('def')).toBe(1);
            expect(StringMatchRank_1.StringMatchRank.fullStringOrderedMatchRatioRank('Lorem ipsum')('Lipsum')).toBe(1);
        });
        it('Returns 0 if the match is exact', function () {
            expect(StringMatchRank_1.StringMatchRank.fullStringOrderedMatchRatioRank('abc')('abc')).toBe(0);
            expect(StringMatchRank_1.StringMatchRank.fullStringOrderedMatchRatioRank('Lorem ipsum')('Lorem ipsum')).toBe(0);
        });
        it('Returns a number between 0 and 1 according to the ratio of characters matched, where 0 means an exact match', function () {
            expect(StringMatchRank_1.StringMatchRank.fullStringOrderedMatchRatioRank('Lrmpu')('Loremipsum')).toBe(0.5);
            expect(StringMatchRank_1.StringMatchRank.fullStringOrderedMatchRatioRank('a')('abcd')).toBe(0.75);
            expect(StringMatchRank_1.StringMatchRank.fullStringOrderedMatchRatioRank('abc')('abcd')).toBe(0.25);
        });
    });
    describe('unorderedMatchRatioRank', function () {
        it('Returns 0 when the match is exact', function () {
            expect(StringMatchRank_1.StringMatchRank.unorderedMatchRatioRank('abc')('cba')).toBe(0);
        });
        it('Returns a better rank if the match is exact than if the wordAcronym match is exact', function () {
            var search = 'abc';
            var exactMatch = 'cba';
            var acronymMatch = 'cd bd ad';
            var exactRank = StringMatchRank_1.StringMatchRank.unorderedMatchRatioRank(search)(exactMatch);
            var acronymRank = StringMatchRank_1.StringMatchRank.unorderedMatchRatioRank(search)(acronymMatch);
            expect((0, numberRank_1.numberRank)(exactRank)).toBeLessThan((0, numberRank_1.numberRank)(acronymRank));
        });
        it('Returns a better rank for a value of which the wordAcronym matches best and better than a value of which the full match matches best', function () {
            var search = 'abc';
            var acronymMatch = 'dd cd bd ad';
            var fullMatch = 'edcba';
            var acronymRank = StringMatchRank_1.StringMatchRank.unorderedMatchRatioRank(search)(acronymMatch);
            var fullMatchRank = StringMatchRank_1.StringMatchRank.unorderedMatchRatioRank(search)(fullMatch);
            expect((0, numberRank_1.numberRank)(acronymRank)).toBeLessThan((0, numberRank_1.numberRank)(fullMatchRank));
        });
        it('Returns a better rank for a value of which the full match matches best and better than a value of which the wordAcronym matches best', function () {
            var search = 'abc';
            var acronymMatch = 'ed dd cd bd ad';
            var fullMatch = 'dcba';
            var acronymRank = StringMatchRank_1.StringMatchRank.unorderedMatchRatioRank(search)(acronymMatch);
            var fullMatchRank = StringMatchRank_1.StringMatchRank.unorderedMatchRatioRank(search)(fullMatch);
            expect((0, numberRank_1.numberRank)(fullMatchRank)).toBeLessThan((0, numberRank_1.numberRank)(acronymRank));
        });
        test('General ranking', function () {
            var us = 'us';
            var usa = 'usa';
            var usoa = 'usoa';
            var unitedStates = 'united states';
            var theUnitedStates = 'the united states';
            var unitedStatesAmerica = 'united states america';
            var unitedStatesOfAmerica = 'united states of america';
            var theUnitedStatesOfAmerica = 'the united states of america';
            var unitedStatesWithDash = 'united-states';
            var unitedStatesAmericaWithDash = 'united-states-america';
            var unitedStatesOfAmericaWithDash = 'united-states-of-america';
            var theUnitedStatesOfAmericaWithDash = 'the-united-states-of-america';
            var values = [
                theUnitedStates,
                theUnitedStatesOfAmerica,
                theUnitedStatesOfAmericaWithDash,
                unitedStates,
                unitedStatesAmerica,
                unitedStatesAmericaWithDash,
                unitedStatesOfAmerica,
                unitedStatesOfAmericaWithDash,
                unitedStatesWithDash,
                us,
                usa,
                usoa,
            ];
            var search = 'su';
            var rankFunction = StringMatchRank_1.StringMatchRank.unorderedMatchRatioRank(search);
            var sorted = values.sort(function (a, b) {
                var rankA = rankFunction(a);
                var rankB = rankFunction(b);
                return (0, numberRank_1.numberRank)(rankA) - (0, numberRank_1.numberRank)(rankB);
            });
            var expectedResult = [
                us,
                unitedStatesWithDash,
                unitedStates,
                usa,
                unitedStatesAmericaWithDash,
                theUnitedStates,
                unitedStatesAmerica,
                usoa,
                unitedStatesOfAmericaWithDash,
                unitedStatesOfAmerica,
                theUnitedStatesOfAmericaWithDash,
                theUnitedStatesOfAmerica,
            ];
            expect(sorted).toEqual(expectedResult);
        });
    });
});
