"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.matchRatioRank = void 0;
var fullMatchRatioRank_1 = require("./fullMatchRatioRank");
var fullAcronymMatchRatioRank_1 = require("./fullAcronymMatchRatioRank");
var acronymMatchRatioRank_1 = require("./acronymMatchRatioRank");
var numberRank_1 = require("../utils/numberRank");
var constants_1 = require("../constants");
var matchRatioRank = function (search) { return function (value) {
    if (search.length > value.length)
        return false;
    var smallestUnit = 1 / constants_1.DEEP_RANK_STRING_LENGTH_LIMIT;
    var fullRank = (0, numberRank_1.numberRank)((0, fullMatchRatioRank_1.fullMatchRatioRank)(search)(value));
    var fullAcronymRank = (0, numberRank_1.numberRank)((0, fullAcronymMatchRatioRank_1.fullAcronymMatchRatioRank)(search)(value));
    var acronymRank = (0, numberRank_1.numberRank)((0, acronymMatchRatioRank_1.acronymMatchRatioRank)(search)(value));
    var rank = Math.min(fullAcronymRank, acronymRank, fullRank);
    if (rank >= 1 || value.length > constants_1.DEEP_RANK_STRING_LENGTH_LIMIT)
        return rank;
    if (rank === acronymRank)
        return acronymRank + smallestUnit / 2;
    if (rank === fullAcronymRank)
        return fullAcronymRank + smallestUnit / 4;
    return rank;
}; };
exports.matchRatioRank = matchRatioRank;
