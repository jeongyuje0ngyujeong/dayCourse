"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.unorderedMatchRatioRank = void 0;
var numberRank_1 = require("../utils/numberRank");
var fullUnorderedMatchRatioRank_1 = require("./fullUnorderedMatchRatioRank");
var fullAcronymUnorderedMatchRatioRank_1 = require("./fullAcronymUnorderedMatchRatioRank");
var acronymUnorderedMatchRatioRank_1 = require("./acronymUnorderedMatchRatioRank");
var constants_1 = require("../constants");
var unorderedMatchRatioRank = function (search) { return function (value) {
    if (search.length > value.length)
        return false;
    var smallestUnit = 1 / constants_1.DEEP_RANK_STRING_LENGTH_LIMIT;
    var fullRank = (0, numberRank_1.numberRank)((0, fullUnorderedMatchRatioRank_1.fullUnorderedMatchRatioRank)(search)(value));
    var fullAcronymRank = (0, numberRank_1.numberRank)((0, fullAcronymUnorderedMatchRatioRank_1.fullAcronymUnorderedMatchRatioRank)(search)(value));
    var acronymRank = (0, numberRank_1.numberRank)((0, acronymUnorderedMatchRatioRank_1.acronymUnorderedMatchRatioRank)(search)(value));
    var rank = Math.min(fullAcronymRank, acronymRank, fullRank);
    if (rank >= 1 || value.length > constants_1.DEEP_RANK_STRING_LENGTH_LIMIT)
        return rank;
    if (rank === acronymRank)
        return acronymRank + smallestUnit / 2;
    if (rank === fullAcronymRank)
        return fullAcronymRank + smallestUnit / 4;
    return rank;
}; };
exports.unorderedMatchRatioRank = unorderedMatchRatioRank;
